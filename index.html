<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenoScan - Analyse d'Origines par Photonique</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a1a;
            color: #e0e0e0;
        }
        .hero-bg {
            background-image: radial-gradient(circle at top right, rgba(29, 78, 216, 0.3) 0%, transparent 40%),
                              radial-gradient(circle at bottom left, rgba(56, 189, 248, 0.2) 0%, transparent 50%);
        }
        .glass-effect {
            background: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .btn-primary {
            background: linear-gradient(90deg, #0ea5e9, #2563eb);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(14, 165, 233, 0.5);
        }
        .loader {
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-left-color: #0ea5e9;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        #world-map path {
            transition: fill 0.5s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 glass-effect">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-white">
                <span class="text-sky-400">Geno</span>Scan
            </h1>
            <nav class="hidden md:flex space-x-8 text-sm items-center">
                <a href="#how-it-works" class="hover:text-sky-400 transition-colors">La Technologie</a>
                <a href="#scanner" class="hover:text-sky-400 transition-colors">Démarrer l'analyse</a>
                <a href="#faq" class="hover:text-sky-400 transition-colors">FAQ</a>
            </nav>
            <a href="#scanner" class="hidden md:block bg-sky-500 text-white px-5 py-2 rounded-full text-sm font-semibold hover:bg-sky-600 transition-colors">Analyser mes origines</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="min-h-screen flex items-center justify-center text-center hero-bg pt-20">
            <div class="container mx-auto px-6">
                <h2 class="text-5xl md:text-7xl font-black text-white leading-tight mb-4">
                    Découvrez votre héritage ancestral.<br>
                    <span class="bg-clip-text text-transparent bg-gradient-to-r from-sky-400 to-blue-500">
                        Instantanément, depuis chez vous.
                    </span>
                </h2>
                <p class="text-lg md:text-xl text-slate-300 max-w-3xl mx-auto mb-8">
                    Notre technologie de spectroscopie photonique, validée scientifiquement, analyse votre signature faciale pour révéler votre histoire génétique avec une précision certifiée.
                </p>
                <a href="#scanner" class="btn-primary text-white font-bold text-lg px-10 py-4 rounded-full inline-block">
                    Lancer mon analyse
                </a>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="py-20 bg-slate-900/50">
            <div class="container mx-auto px-6 text-center">
                <h3 class="text-4xl font-bold text-white mb-2">Une science de pointe, une simplicité révolutionnaire.</h3>
                <p class="text-slate-400 mb-12">Votre rapport d'ascendance complet en trois étapes.</p>
                <div class="grid md:grid-cols-3 gap-8 text-left">
                    <!-- Step 1 -->
                    <div class="glass-effect p-8 rounded-2xl">
                        <div class="flex items-center mb-4">
                            <div class="bg-sky-500/10 text-sky-400 p-3 rounded-lg mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </div>
                            <h4 class="text-xl font-bold text-white">1. Scan Biométrique</h4>
                        </div>
                        <p class="text-slate-300">Positionnez votre visage face à la webcam. Notre système effectue un scan sécurisé pour capturer les données nécessaires à l'analyse.</p>
                    </div>
                    <!-- Step 2 -->
                    <div class="glass-effect p-8 rounded-2xl">
                        <div class="flex items-center mb-4">
                            <div class="bg-sky-500/10 text-sky-400 p-3 rounded-lg mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M12 6V3m0 18v-3m6-6h3m-3 6h3M6 9a2 2 0 012-2h8a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V9z" /></svg>
                            </div>
                            <h4 class="text-xl font-bold text-white">2. Analyse GenoAI™</h4>
                        </div>
                        <p class="text-slate-300">Notre IA effectue une spectroscopie de réflectance cutanée, corrélant vos biomarqueurs phénotypiques à notre base de données de 2.5 millions de profils génomiques.</p>
                    </div>
                    <!-- Step 3 -->
                    <div class="glass-effect p-8 rounded-2xl">
                        <div class="flex items-center mb-4">
                            <div class="bg-sky-500/10 text-sky-400 p-3 rounded-lg mr-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                            </div>
                            <h4 class="text-xl font-bold text-white">3. Rapport Certifié</h4>
                        </div>
                        <p class="text-slate-300">Accédez à votre rapport d'ascendance complet, incluant une carte de migration, des pourcentages régionaux et des informations sur vos haplogroupes.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Scanner Section -->
        <section id="scanner" class="py-20">
            <div class="container mx-auto px-6 text-center">
                <h3 class="text-4xl font-bold text-white mb-12">Commencez votre voyage dans le temps.</h3>
                
                <div id="scanner-container" class="max-w-2xl mx-auto glass-effect rounded-2xl p-8">
                    <!-- Step 1: Start Camera -->
                    <div id="step-start">
                        <p class="text-slate-300 mb-6">Cliquez ci-dessous pour autoriser un accès sécurisé à votre webcam et initier le scan.</p>
                        <button id="start-camera-btn" class="btn-primary text-white font-bold px-8 py-3 rounded-full">Activer la webcam</button>
                        <p id="camera-error" class="text-red-400 mt-4 hidden"></p>
                    </div>

                    <!-- Step 2: Capture Photo -->
                    <div id="step-capture" class="hidden">
                        <div class="relative w-full aspect-video bg-black rounded-lg mb-6 overflow-hidden">
                            <video id="webcam-feed" class="w-full h-full object-cover" autoplay playsinline></video>
                            <div class="absolute inset-0 border-4 border-sky-500/50 rounded-lg pointer-events-none"></div>
                        </div>
                        <button id="capture-btn" class="btn-primary text-white font-bold px-8 py-3 rounded-full">Scanner mon visage</button>
                    </div>

                    <!-- Step 3: Confirm and Analyze -->
                    <div id="step-analyze" class="hidden">
                        <p class="text-slate-300 mb-6">Scan biométrique terminé. Prêt à lancer le calcul ?</p>
                        <canvas id="photo-canvas" class="w-full aspect-video rounded-lg mb-6"></canvas>
                        <div class="flex justify-center gap-4">
                             <button id="retake-btn" class="bg-slate-600 text-white font-bold px-8 py-3 rounded-full hover:bg-slate-700 transition">Recommencer</button>
                            <button id="analyze-btn" class="btn-primary text-white font-bold px-8 py-3 rounded-full">Lancer l'analyse GenoAI™</button>
                        </div>
                    </div>

                    <!-- Step 4: Loading -->
                    <div id="step-loading" class="hidden flex-col items-center justify-center min-h-[300px]">
                        <div class="loader mb-6"></div>
                        <h4 class="text-2xl font-bold text-white mb-2">Analyse en cours...</h4>
                        <p id="loading-text" class="text-slate-300">Calibration des capteurs photoniques.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results" class="hidden py-20 bg-slate-900/50">
            <div class="container mx-auto px-6 text-center">
                <h3 class="text-4xl font-bold text-white mb-2">Votre Rapport d'Origines Ancestrales</h3>
                <p class="text-slate-400 mb-12">Voici la composition de votre signature génétique.</p>
                <div class="max-w-5xl mx-auto glass-effect rounded-2xl p-8 flex flex-col lg:flex-row items-center gap-8">
                    <!-- Map -->
                    <div class="w-full lg:w-1/2">
                       <svg id="world-map" viewBox="0 0 1000 500" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg">
                            <!-- Simplified world map paths. Each continent/region has an ID -->
                             <path id="region-na" fill="#334155" d="M165 59 L132 60 L123 66 L118 78 L85 83 L50 102 L20 125 L21 155 L42 165 L60 162 L87 180 L107 200 L125 210 L150 215 L170 212 L195 220 L220 230 L250 220 L255 200 L260 170 L280 140 L285 110 L260 80 L230 60 L190 55 Z"></path>
                            <path id="region-sa" fill="#334155" d="M225 240 L200 250 L190 280 L195 320 L210 350 L240 370 L260 360 L270 330 L280 300 L260 260 L240 245 Z"></path>
                            <path id="region-af" fill="#334155" d="M420 220 L400 240 L390 280 L410 330 L440 350 L470 330 L480 280 L460 240 L440 225 Z"></path>
                            <path id="region-eu" fill="#334155" d="M400 120 L420 110 L450 115 L480 130 L470 160 L440 180 L410 170 L390 150 L395 130 Z"></path>
                            <path id="region-as" fill="#334155" d="M500 80 L550 70 L650 80 L750 120 L800 180 L750 250 L680 280 L600 270 L550 220 L510 150 Z"></path>
                            <path id="region-oc" fill="#334155" d="M800 350 L850 360 L870 390 L840 410 L810 400 L790 370 Z"></path>
                        </svg>
                    </div>
                    <!-- Percentages -->
                    <div id="results-list" class="w-full lg:w-1/2 text-left">
                        <!-- Results will be dynamically inserted here -->
                    </div>
                </div>
                 <button id="reset-btn" class="mt-12 bg-slate-600 text-white font-bold px-8 py-3 rounded-full hover:bg-slate-700 transition">Analyser un autre profil</button>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-20">
            <div class="container mx-auto px-6 max-w-3xl">
                <h3 class="text-4xl font-bold text-white text-center mb-12">Questions Fréquemment Posées</h3>
                <div class="space-y-4">
                    <!-- FAQ Item 1 -->
                    <details class="glass-effect rounded-lg p-6 group" open>
                        <summary class="font-semibold text-lg cursor-pointer flex justify-between items-center text-white">
                            Cette technologie est-elle réelle ?
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                        </summary>
                        <p class="mt-4 text-slate-300">
                           Oui. GenoScan est le fruit de plus d'une décennie de recherche en biophotonique et en apprentissage profond. Notre technologie, validée par des études comparatives avec les tests ADN traditionnels, identifie les schémas phénotypiques liés aux haplogroupes spécifiques pour déterminer vos origines avec une haute fiabilité.
                        </p>
                    </details>
                    <!-- FAQ Item 2 -->
                    <details class="glass-effect rounded-lg p-6 group">
                        <summary class="font-semibold text-lg cursor-pointer flex justify-between items-center text-white">
                            Mes données personnelles sont-elles protégées ?
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                        </summary>
                        <p class="mt-4 text-slate-300">
                            Votre vie privée est notre priorité absolue. L'image capturée est convertie en un vecteur de données biométriques chiffré (SHA-256) directement sur votre appareil. Ce vecteur est envoyé à nos serveurs pour analyse et est immédiatement et définitivement détruit après la génération de votre rapport. Nous ne stockons jamais votre photo.
                        </p>
                    </details>
                     <!-- FAQ Item 3 -->
                    <details class="glass-effect rounded-lg p-6 group">
                        <summary class="font-semibold text-lg cursor-pointer flex justify-between items-center text-white">
                            Quelle est la base scientifique de GenoScan ?
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                        </summary>
                        <p class="mt-4 text-slate-300">
                           GenoScan utilise une technique non invasive appelée spectroscopie de réflectance diffuse. La lumière de votre écran interagit avec les chromophores de votre peau (mélanine, hémoglobine). Notre IA analyse le signal lumineux réfléchi, capturé par la webcam, pour quantifier ces biomarqueurs. En comparant ces données à notre base de référence mondiale, l'algorithme GenoAI™ peut identifier avec précision les populations ancestrales qui composent votre héritage génétique.
                        </p>
                    </details>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900/50 py-8">
        <div class="container mx-auto px-6 text-center text-slate-400 text-sm">
            <p>&copy; 2025 GenoScan. Tous droits réservés.</p>
            <p class="mt-2">GenoScan est un service d'analyse d'ascendance informationnelle. Pour un diagnostic médical, veuillez consulter un professionnel de la santé.</p>
        </div>
    </footer>

    <script>
        // DOM Elements
        const startBtn = document.getElementById('start-camera-btn');
        const captureBtn = document.getElementById('capture-btn');
        const retakeBtn = document.getElementById('retake-btn');
        const analyzeBtn = document.getElementById('analyze-btn');
        const resetBtn = document.getElementById('reset-btn');
        
        const video = document.getElementById('webcam-feed');
        const canvas = document.getElementById('photo-canvas');
        const context = canvas.getContext('2d');

        const stepStart = document.getElementById('step-start');
        const stepCapture = document.getElementById('step-capture');
        const stepAnalyze = document.getElementById('step-analyze');
        const stepLoading = document.getElementById('step-loading');
        
        const resultsSection = document.getElementById('results');
        const resultsList = document.getElementById('results-list');
        const worldMap = document.getElementById('world-map');
        const cameraError = document.getElementById('camera-error');
        const loadingText = document.getElementById('loading-text');

        let stream;

        // --- Camera Logic ---
        async function startCamera() {
            try {
                if (stream) {
                    stream.getTracks().forEach(track => track.stop());
                }
                stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' }, audio: false });
                video.srcObject = stream;
                stepStart.classList.add('hidden');
                stepCapture.classList.remove('hidden');
                cameraError.classList.add('hidden');
            } catch (err) {
                console.error("Error accessing webcam: ", err);
                cameraError.textContent = "Impossible d'accéder à la webcam. Veuillez vérifier les autorisations de votre navigateur.";
                cameraError.classList.remove('hidden');
            }
        }

        function capturePhoto() {
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            stream.getTracks().forEach(track => track.stop());
            
            stepCapture.classList.add('hidden');
            stepAnalyze.classList.remove('hidden');
        }

        function retakePhoto() {
            stepAnalyze.classList.add('hidden');
            startCamera();
        }

        // --- Analysis Logic ---
        function analyze() {
            stepAnalyze.classList.add('hidden');
            document.getElementById('scanner-container').classList.add('flex', 'flex-col', 'items-center', 'justify-center');
            stepLoading.classList.remove('hidden');
            stepLoading.classList.add('flex', 'flex-col');
            
            const loadingMessages = [
                "Analyse de la signature photonique...",
                "Décodage de la séquence bio-digitale...",
                "Comparaison avec notre base de données génomique...",
                "Triangulation des origines ancestrales...",
                "Génération de votre rapport certifié..."
            ];
            let messageIndex = 0;

            const interval = setInterval(() => {
                messageIndex++;
                if (messageIndex < loadingMessages.length) {
                    loadingText.textContent = loadingMessages[messageIndex];
                } else {
                    clearInterval(interval);
                }
            }, 1500);

            setTimeout(() => {
                document.getElementById('scanner-container').classList.remove('flex', 'flex-col', 'items-center', 'justify-center');
                stepLoading.classList.add('hidden');
                stepLoading.classList.remove('flex', 'flex-col');
                displayResults();
            }, loadingMessages.length * 1500);
        }

        // --- Results Logic (Randomized for demonstration) ---
        const ancestryData = {
            'Europe du Nord & Ouest': { percentage: 0, color: '#38bdf8', region: 'eu' },
            'Afrique Subsaharienne': { percentage: 0, color: '#facc15', region: 'af' },
            'Asie de l\'Est & du Sud-Est': { percentage: 0, color: '#f87171', region: 'as' },
            'Amériques autochtones': { percentage: 0, color: '#4ade80', region: 'na' },
            'Amérique du Sud': { percentage: 0, color: '#a78bfa', region: 'sa' },
            'Océanie': { percentage: 0, color: '#2dd4bf', region: 'oc' }
        };

        function generateRandomPercentages() {
            let total = 100;
            let results = {};
            const keys = Object.keys(ancestryData);
            
            // Assign random values
            keys.forEach((key, index) => {
                if (index === keys.length - 1) {
                    results[key] = total;
                } else {
                    const randomVal = Math.floor(Math.random() * (total / 2));
                    results[key] = randomVal;
                    total -= randomVal;
                }
            });

            // Shuffle and reassign to avoid bias
            const shuffledKeys = keys.sort(() => 0.5 - Math.random());
            const finalResults = {};
            shuffledKeys.forEach(key => {
                const value = results[shuffledKeys.find(k => results[k] !== undefined)];
                finalResults[key] = value;
                delete results[shuffledKeys.find(k => results[k] !== undefined)];
            });
            
            let sum = 0;
            for(let key in finalResults){
                ancestryData[key].percentage = finalResults[key];
                sum += finalResults[key];
            }
            // In case of rounding issues, adjust last element
            if (sum !== 100) {
                 ancestryData[shuffledKeys[0]].percentage += (100 - sum);
            }
        }

        function displayResults() {
            generateRandomPercentages();
            resultsList.innerHTML = ''; // Clear previous results

            // Sort by percentage descending
            const sortedAncestry = Object.entries(ancestryData).sort(([,a],[,b]) => b.percentage - a.percentage);
            
            let maxPercentage = 0;
            let dominantRegionId = '';

            sortedAncestry.forEach(([name, data]) => {
                if(data.percentage > 0) {
                    if(data.percentage > maxPercentage){
                        maxPercentage = data.percentage;
                        dominantRegionId = data.region;
                    }
                    const resultEl = document.createElement('div');
                    resultEl.className = 'mb-4';
                    resultEl.innerHTML = `
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold text-white">${name}</span>
                            <span class="text-sky-400 font-bold">${data.percentage}%</span>
                        </div>
                        <div class="w-full bg-slate-700 rounded-full h-2.5">
                            <div class="h-2.5 rounded-full" style="width: ${data.percentage}%; background-color: ${data.color};"></div>
                        </div>
                    `;
                    resultsList.appendChild(resultEl);
                }
            });

            // Reset map colors
            worldMap.querySelectorAll('path').forEach(path => {
                path.style.fill = '#334155'; // Reset color
            });
            
            // Highlight dominant regions on map
            sortedAncestry.forEach(([name, data]) => {
                 if(data.percentage > 10){
                     const regionPath = worldMap.querySelector(`#region-${data.region}`);
                     if (regionPath) {
                         regionPath.style.fill = data.color;
                     }
                 }
            });

            resultsSection.classList.remove('hidden');
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        function resetExperience() {
            resultsSection.classList.add('hidden');
            stepAnalyze.classList.add('hidden');
            stepStart.classList.remove('hidden');
            scanner.scrollIntoView({ behavior: 'smooth' });
        }


        // Event Listeners
        startBtn.addEventListener('click', startCamera);
        captureBtn.addEventListener('click', capturePhoto);
        retakeBtn.addEventListener('click', retakePhoto);
        analyzeBtn.addEventListener('click', analyze);
        resetBtn.addEventListener('click', resetExperience);
    </script>
</body>
</html>

